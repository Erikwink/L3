<!DOCTYPE html>
<html>
  <head>
    <title>Converter</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./src/css/style.css" />
    <!-- <script src="./src/js/index.js" type="module"></script> -->
  </head>
  <body>
    <div class="converter-container">
      <h1>Unit Converter</h1>
      
      <div id="slider-container">
        <label class="switch">
          <input type="checkbox" />
          <span class="slider round"></span>
        </label>
      </div>
      <div id="slider-h3-container">
        <h3 id="slider-header">Convert</h3>
      </div>
      <!-- calculation page -->
      <div id="calculation-history" hidden>
        <button id="clear-history">Clear History</button>
        <ul id="history-list"></ul>
      </div>
      <!-- conversion page -->
      <div id="conversion-form">
      <div class="form-group">
        <label for="value">Value to convert:</label>
        <input type="number" id="value" placeholder="Enter value" />
      </div>

      <div class="form-group">
        <label for="from-unit">From:</label>
        <select id="from-unit">
          <option value="">Select a unit</option>
        </select>
      </div>

      <div class="form-group">
        <label for="to-unit">To:</label>
        <select id="to-unit">
          <option value="">Select a unit</option>
        </select>
      </div>

      <div class="form-group">
        <label for="decimals">Decimals:</label>
        <input type="number" id="decimals" value="2" />
      </div>
      <div class="toggle-btns">
        <button id="toggle-calculation" class="toggle-btn">
          Show Calculation
        </button>
      </div>

      <button id="convert-btn" style="margin-top: 10px">Convert</button>

      <div id="result">
        <span id="converted-value"></span>
      </div>
    </div>
    </div>
    
    <script src="./dist/bundle.js"></script>
  </body>
</html>


<!-- import { Converter } from 'unit-converter'
const converter = new Converter()

// Populate the "from" and "to" dropdowns with available units
const unitMap = converter.getUnits()
const fromSelect = document.getElementById('from-unit')
const toSelect = document.getElementById('to-unit')

// Flags to keep track of toggle states
let showCalculation = false
document.addEventListener('DOMContentLoaded', function () {
  const sliderInput = document.querySelector('.switch input')
  const sliderHeader = document.querySelector('#slider-header')
  const conversionForm = document.getElementById('conversion-form')
  const calculationHistory = document.getElementById('calculation-history')
  const calculationBtn = document.getElementById('toggle-calculation')
  const clearHistoryBtn = document.getElementById('clear-history')
  const historyList = document.getElementById('history-list')

  function clearHistory () {
    localStorage.removeItem('calculations')
    historyList.innerHTML = ''
  }

  // Listen for the change event of the slider
  sliderInput.addEventListener('change', function () {
    if (sliderInput.checked) {
      sliderHeader.textContent = 'Previous Calculations'
      conversionForm.style.display = 'none'
      calculationHistory.style.display = 'block'
      showHistory() // Show previous calculations
    } else {
      sliderHeader.textContent = 'Convert'
      conversionForm.style.display = 'block' // Show the form
      calculationHistory.style.display = 'none' // Properly hide the history
    }
  })

  calculationBtn.addEventListener('click', function () {
    showCalculation = !showCalculation
    calculationBtn.textContent = showCalculation ? 'Hide Calculation' : 'Show Calculation'
  })

  clearHistoryBtn.addEventListener('click', function () {
    clearHistory()
  })
})

// Populate options for units
/**
 *
 */
function populateUnits () {
  for (const type in unitMap) {
    unitMap[type].forEach(unit => {
      const option1 = document.createElement('option')
      option1.value = unit
      option1.textContent = `${unit} (${type})`
      const option2 = option1.cloneNode(true)

      fromSelect.appendChild(option1)
      toSelect.appendChild(option2)
    })
  }
}

// Run function to populate units dropdowns
populateUnits()

// Add event listener to the "Convert" button
document.getElementById('convert-btn').addEventListener('click', () => {
  const value = document.getElementById('value').value
  const fromUnit = document.getElementById('from-unit').value
  const toUnit = document.getElementById('to-unit').value
  const decimals = document.getElementById('decimals').value

  if (!value || !fromUnit || !toUnit) {
    alert('Please fill in all fields!')
    return
  }

  try {
    // Set the value and decimals
    converter.setValue(parseFloat(value))
    converter.setDecimals(parseInt(decimals))

    let result = ''
    if (showCalculation) {
      result = converter.convertToCalc(fromUnit, toUnit)
    } else {
      result = converter.convertToString(fromUnit, toUnit)
    }

    document.getElementById('converted-value').textContent = result
    saveCalculation(`${converter.convertToCalc(fromUnit, toUnit)}`)
  } catch (error) {
    alert(error.message)
  }
})

/**
 * Save the calculation to local storage.
 *
 * @param calculation
 */
function saveCalculation (calculation) {
  const calculations = JSON.parse(localStorage.getItem('calculations')) || []
  calculations.push(calculation)
  localStorage.setItem('calculations', JSON.stringify(calculations))
}

/**
 * Show the previous calculations from local storage.
 */
function showHistory () {
  const calculations = JSON.parse(localStorage.getItem('calculations')) || []
  const historyList = document.getElementById('history-list')
  historyList.innerHTML = '' // Clear old history
  calculations.forEach(calc => {
    const li = document.createElement('li')
    li.textContent = calc
    historyList.appendChild(li)
  })
}
 -->